{"ast":null,"code":"import React,{useContext,useState,useEffect}from'react';import{ProductContext}from'../../Context/ProductContextProvider';import{useNavigate}from'react-router-dom';import{UserContext}from'../../Context/UserContextProvider';import axios from'axios';import{FaMapPin,FaClock,FaMoneyCheck,FaShippingFast,FaShoppingBasket,FaMarker,FaMapSigns,FaMap,FaPhoneAlt,FaRegEnvelope,FaBuilding,FaStreetView,FaUserAlt,FaSign,FaLeaf}from'react-icons/fa';// Imported icons\nimport styles from'./Shipping.module.css';import{getQuantity}from'../../Helper/Helper';import{ShippingContext}from'../../Context/ShippingCotextProvider';import{validate}from'../../Helper/ShippingErrors';import styled from'styled-components';import axiosInstance from'../../Helper/apiInterceptors';import{notify}from'../../Helper/toast';import'react-toastify/dist/ReactToastify.css';import{ToastContainer}from'react-toastify';// Helper function to format dates for display\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export const formatDate=date=>{return date.toLocaleDateString('fa-IR',{weekday:'short',month:'short',day:'numeric'});};const Shipping=()=>{const[responseMsg,setResponseMsg]=useState('');const{shippingInfo,dispatchShipping}=useContext(ShippingContext);const HandelShipping=async()=>{const validationErrors=validate(address,'login');if(Object.keys(validationErrors).length!==0){validate(address);setTouched({firstName:true,lastName:true,area:true,neighbourhood:true,street:true,alleys:true,postalCode:true,phoneNumber:true,plaque:true});// return\n}const requiredFields={firstName:address.firstName,lastName:address.lastName,area:address.area,neighbourhood:address.neighbourhood,street:address.street,alleys:address.alleys,postalCode:address.postalCode,phoneNumber:address.phoneNumber,plaque:address.plaque,deliveryfee,selectedDate:selectedDate?selectedDate.toISOString():null,selectedTimeSlot:selectedTimeSlot===null||selectedTimeSlot===void 0?void 0:selectedTimeSlot.time,productQuantityInCart,totalCartPrice,totalPrice:deliveryfee+totalCartPrice,products};// Check for missing fields\nconst missingFields=Object.entries(requiredFields).filter(_ref=>{let[key,value]=_ref;return value===null||value===undefined||value==='';}).map(_ref2=>{let[key]=_ref2;return key;});// Map field keys to user-friendly names\nconst fieldNames={firstName:'نام',lastName:'نام خانوادگی',area:'منطقه',neighbourhood:'محله',street:'خیابان',alleys:'کوچه',postalCode:'کد پستی',phoneNumber:'شماره تلفن',plaque:'پلاک',deliveryfee:'هزینه ارسال',selectedDate:'تاریخ  ',selectedTimeSlot:'بازه زمانی  ',productQuantityInCart:'تعداد محصولات در سبد خرید',totalCartPrice:'مجموع قیمت سبد خرید',totalPrice:'قیمت کل',products:'محصولات'};// Get user-friendly names for missing fields\nconst userFriendlyNames=missingFields.map(field=>fieldNames[field]);if(missingFields.length>0){// alert(`The following fields are missing or invalid: ${missingFields.join(', ')}`);\nnotify(`u have currenlly ${missingFields.length} missing fields`,'error');setShippingInfoIsFull([...userFriendlyNames]);return;}const updatedShippingData={...requiredFields};// Dispatch the data to the reducer\ndispatchShipping({type:'HANDEL_DETAILS',payload:updatedShippingData});try{// Use the updatedShippingData directly in the API call\nconst response=await axiosInstance.post('/add-order',{updatedShippingData});if(response.status===201){// alert('Order was placed successfully');\nnotify(`order was placed successfully`,'success');navigate('/dashboard');}}catch(error){notify(error.message,'error');setResponseMsg(error.message);}};const[errors,setErrors]=useState({});const[shippingInfoIsFull,setShippingInfoIsFull]=useState([]);const[touched,setTouched]=useState({});const focusHandler=e=>{setTouched({...touched,[e.target.name]:true});};const navigate=useNavigate();const[isEditing,setIsEditing]=useState(false);// Track edit mode\nconst[address,setAddress]=useState({firstName:'',lastName:'',area:'',neighbourhood:'',street:'',alleys:'',postalCode:'',phoneNumber:'',plaque:''});const[deliveryfee,setDeiveryFee]=useState();useEffect(()=>{setErrors(validate(address));},[address,touched]);const[message,setMessage]=useState('');const[selectedBox,setSelectedBox]=useState(false);//context\nconst{state}=useContext(ProductContext);const{userInfo,dispatchInfo}=useContext(UserContext);const handleChange=e=>{const{name,value}=e.target;setAddress(prevAddress=>({...prevAddress,[name]:value}));};const checkSession=async()=>{try{const response=await axiosInstance.get('/check-session');if(response.data.loggedIn&&response.data.redirect){dispatchInfo({type:'LOGIN'});}else{navigate('/dashboard');}}catch(error){notify(error.message,'error');setResponseMsg(error.message);}};useEffect(()=>{checkSession();if(!userInfo.logedIn){setMessage('شما وارد نشده‌اید. در حال هدایت به داشبورد...');const timer=setTimeout(()=>{navigate('/dashboard');},3000);return()=>clearTimeout(timer);}else if(!state.checkout){setMessage('سبد خرید شما خالی است. در حال هدایت به فروشگاه...');const timer=setTimeout(()=>{navigate('/store');},3000);return()=>clearTimeout(timer);}},[userInfo.logedIn,state.checkout,navigate]);//date handeling///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\nconst[selectedDate,setSelectedDate]=useState(null);const[timeSlots,setTimeSlots]=useState([]);// Time slots state\nconst[selectedTimeSlot,setSelectedTimeSlot]=useState(null);// Store the selected time slot\n// Calculate the start date (3 days from today)\nconst startDate=new Date();startDate.setDate(startDate.getDate()+3);// Generate dates for the next 14 days\nconst dates=Array.from({length:14},(_,i)=>{const date=new Date(startDate);date.setDate(startDate.getDate()+i);return date;});//  MongoDB’s Date type stores the entire date, including time, down to milliseconds (e.g., 2024-11-28T00:00:00.000Z). However, as long as you set the time portion to midnight (00:00:00) in UTC, this will not throw an error, and it will work correctly with MongoDB queries.\n// Fetch available time slots for selected date\nconst fetchTimeSlots=async date=>{try{// Make a request to the server with the date query\nconst response=await axiosInstance.get(`/check-date-capacity?date=${date}`);if(response.status===200){const transformedSlots=Object.entries(response.data).map(_ref3=>{let[time,status]=_ref3;return{//object.entries makes every object into array then the map function maps through the inner arrays turning them into object with time and status properties will will retun an array with 4  new object with time and status as properties.\ntime,status};});setTimeSlots(transformedSlots);}else{console.error(\"Unexpected response status:\",response.status);}}catch(error){notify(error.message,'error');setResponseMsg(error.message);}};// Handle date click and store it as a Date object\nconst handleDateClick=date=>{setSelectedTimeSlot(null);const selected=new Date(date);selected.setUTCHours(0,0,0,0);// Set time to midnight UTC\nsetSelectedDate(selected);fetchTimeSlots(selected.toISOString());};// Handle time slot selection\nconst handleTimeSlotSelect=slot=>{if(slot.status==='available'){setSelectedTimeSlot(slot);}if(totalCartPrice>=375000){setDeiveryFee('رایگان');}};const[productQuantityInCart,setProductsQuantityInCart]=useState(0);const[totalCartPrice,setTotalCartPrice]=useState(0);const[products,setProducts]=useState([]);useEffect(()=>{setProducts(state.selectedItems);const totalQuantity=state.selectedItems.reduce((acc,item)=>acc+item.quantity,0);setProductsQuantityInCart(totalQuantity);// Calculate total price\nconst totalPrice=state.selectedItems.reduce((acc,item)=>{const itemPrice=item.price*item.quantity;return acc+itemPrice;},0);setTotalCartPrice(totalPrice);setDeiveryFee(totalPrice>=350000?'رایگان':50000);},[state.selectedItems]);if(message){return/*#__PURE__*/_jsx(\"div\",{children:message});}// Show the dotted box with the pin icon if no address is available\nconst renderAddressForm=!address.area&&!address.neighbourhood&&!address.street&&!address.alleys;const handleEditToggle=()=>{const validationErrors=validate(address);if(Object.keys(validationErrors).length===0){setIsEditing(!isEditing);setErrors({});}else{setErrors(validationErrors);setIsEditing(true);}};const arrow='<';return/*#__PURE__*/_jsxs(\"div\",{className:styles.shippingContainer,children:[renderAddressForm&&!isEditing?/*#__PURE__*/_jsxs(\"div\",{className:styles.addressSummaryContainer,onClick:handleEditToggle,children:[/*#__PURE__*/_jsx(\"div\",{className:styles.addressPinIcon,children:/*#__PURE__*/_jsx(FaMapPin,{size:50})}),/*#__PURE__*/_jsx(\"p\",{className:styles.addressSummaryText,children:\"\\u067E\\u0631 \\u06A9\\u0631\\u062F\\u0646 \\u0627\\u0637\\u0644\\u0627\\u0639\\u0627\\u062A \\u062A\\u062D\\u0648\\u06CC\\u0644\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h2\",{className:styles.sectionTitile,children:[\" \",/*#__PURE__*/_jsx(FaShippingFast,{}),\" \\u0627\\u0637\\u0644\\u0627\\u0639\\u0627\\u062A \\u062D\\u0645\\u0644 \\u0648 \\u0646\\u0642\\u0644\"]}),isEditing?/*#__PURE__*/_jsxs(\"form\",{className:styles.form,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.formField,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"firstName\",children:\"\\u0646\\u0627\\u0645\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"firstName\",name:\"firstName\",value:address.firstName,onChange:handleChange,placeholder:\"\\u0646\\u0627\\u0645\",required:true,maxLength:\"30\",onFocus:focusHandler}),/*#__PURE__*/_jsx(\"span\",{style:{height:'1rem',color:'red',opacity:touched.firstName?'1':'0'},children:errors.firstName&&touched.firstName&&`${errors.firstName}`})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.formField,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"lastName\",children:\"\\u0646\\u0627\\u0645 \\u062E\\u0627\\u0646\\u0648\\u0627\\u062F\\u06AF\\u06CC\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"lastName\",name:\"lastName\",value:address.lastName,onChange:handleChange,placeholder:\"\\u0646\\u0627\\u0645 \\u062E\\u0627\\u0646\\u0648\\u0627\\u062F\\u06AF\\u06CC\",required:true,maxLength:\"30\",onFocus:focusHandler}),/*#__PURE__*/_jsx(\"span\",{style:{height:'1rem',color:'red',opacity:touched.lastName?'1':'0'},children:errors.lastName&&touched.lastName&&`${errors.lastName}`})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.formField,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"area\",children:\"\\u0645\\u0646\\u0637\\u0642\\u0647\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"area\",name:\"area\",value:address.area,onChange:handleChange,placeholder:\"\\u0645\\u0646\\u0637\\u0642\\u0647\",required:true,maxLength:\"30\",onFocus:focusHandler}),/*#__PURE__*/_jsx(\"span\",{style:{height:'1rem',color:'red',opacity:touched.area?'1':'0'},children:errors.area&&touched.area&&`${errors.area}`})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.formField,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"neighbourhood\",children:\"\\u0645\\u062D\\u0644\\u0647\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"neighbourhood\",name:\"neighbourhood\",value:address.neighbourhood,onChange:handleChange,placeholder:\"\\u0646\\u0627\\u0645 \\u0645\\u062D\\u0644\\u0647\",required:true,maxLength:\"30\",onFocus:focusHandler}),/*#__PURE__*/_jsx(\"span\",{style:{height:'1rem',color:'red',opacity:touched.neighbourhood?'1':'0'},children:errors.neighbourhood&&touched.neighbourhood&&`${errors.neighbourhood}`})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.formField,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"street\",children:\"\\u062E\\u06CC\\u0627\\u0628\\u0627\\u0646\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"street\",name:\"street\",value:address.street,onChange:handleChange,placeholder:\"\\u0646\\u0627\\u0645 \\u062E\\u06CC\\u0627\\u0628\\u0627\\u0646\",maxLength:\"30\",required:true,onFocus:focusHandler}),/*#__PURE__*/_jsx(\"span\",{style:{height:'1rem',color:'red',opacity:touched.street?'1':'0'},children:errors.street&&touched.street&&`${errors.street}`})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.formField,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"alleys\",children:\"\\u06A9\\u0648\\u0686\\u0647\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"alleys\",name:\"alleys\",value:address.alleys,onChange:handleChange,placeholder:\"\\u06A9\\u0648\\u0686\\u0647\",maxLength:\"30\",onFocus:focusHandler}),/*#__PURE__*/_jsx(\"span\",{style:{height:'1rem',color:'red',opacity:touched.alleys?'1':'0'},children:errors.alleys&&touched.alleys&&`${errors.alleys}`})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.formField,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"postalCode\",children:\"\\u06A9\\u062F \\u067E\\u0633\\u062A\\u06CC\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"postalCode\",name:\"postalCode\",value:address.postalCode,onChange:handleChange,placeholder:\"\\u06A9\\u062F \\u067E\\u0633\\u062A\\u06CC\",maxLength:\"30\",onFocus:focusHandler}),/*#__PURE__*/_jsx(\"span\",{style:{height:'1rem',color:'red',opacity:touched.postalCode?'1':'0'},children:errors.postalCode&&touched.postalCode&&`${errors.postalCode}`})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.formField,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"phoneNumber\",children:\"\\u0634\\u0645\\u0627\\u0631\\u0647 \\u062A\\u0644\\u0641\\u0646\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"phoneNumber\",name:\"phoneNumber\",value:address.phoneNumber,onChange:handleChange,placeholder:\"\\u0634\\u0645\\u0627\\u0631\\u0647 \\u062A\\u0644\\u0641\\u0646\",required:true,maxLength:\"30\",onFocus:focusHandler}),/*#__PURE__*/_jsx(\"span\",{style:{height:'1rem',color:'red',opacity:touched.phoneNumber?'1':'0'},children:errors.phoneNumber&&touched.phoneNumber&&`${errors.phoneNumber}`})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.formField,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"plaque\",children:\"\\u067E\\u0644\\u0627\\u06A9\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"plaque\",name:\"plaque\",value:address.plaque,onChange:handleChange,placeholder:\"\\u067E\\u0644\\u0627\\u06A9\",required:true,maxLength:\"30\",onFocus:focusHandler}),/*#__PURE__*/_jsx(\"span\",{style:{height:'1rem',color:'red',opacity:touched.plaque?'1':'0'},children:errors.plaque&&touched.plaque&&`${errors.plaque}`})]})]}):/*#__PURE__*/_jsxs(\"div\",{className:styles.addressDetails,children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(FaUserAlt,{}),\" \",/*#__PURE__*/_jsx(\"span\",{children:\": \\u0646\\u0627\\u0645 \\u0648 \\u0646\\u0627\\u0645 \\u062E\\u0627\\u0646\\u0648\\u0627\\u062F\\u06AF\\u06CC\"}),\" \",address.firstName,\" \",address.lastName]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(FaMapSigns,{}),\" \",/*#__PURE__*/_jsxs(\"span\",{children:[\" \",arrow,\" \\u0645\\u0646\\u0637\\u0642\\u0647\"]}),\" \",address.area,\" \",/*#__PURE__*/_jsxs(\"span\",{children:[\" \",arrow,\" \\u0645\\u062D\\u0644\\u0647\"]}),\" \",address.neighbourhood,\" \",/*#__PURE__*/_jsxs(\"span\",{children:[\" \",arrow,\" \\u062E\\u06CC\\u0627\\u0628\\u0627\\u0646\"]}),\" \",address.street,\" \",/*#__PURE__*/_jsxs(\"span\",{children:[\" \",arrow,\" \\u06A9\\u0648\\u0686\\u0647\"]}),\" \",address.alleys,\" \",/*#__PURE__*/_jsxs(\"span\",{children:[\" \",arrow,\" \\u067E\\u0644\\u0627\\u06A9\"]}),\" \",address.plaque]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(FaPhoneAlt,{}),\" \",/*#__PURE__*/_jsx(\"span\",{children:\" : \\u0634\\u0645\\u0627\\u0631\\u0647 \\u062A\\u0644\\u0641\\u0646\"}),\" \",address.phoneNumber]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(FaRegEnvelope,{}),\" \",/*#__PURE__*/_jsx(\"span\",{children:\" : \\u06A9\\u062F \\u067E\\u0633\\u062A\\u06CC\"}),\" \",address.postalCode]})]}),/*#__PURE__*/_jsx(\"button\",{className:styles.editButton,onClick:handleEditToggle,children:isEditing?'خاتمه و مشاهده':'ویرایش'})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h4\",{className:styles.sectionTitile,children:[\" \",/*#__PURE__*/_jsx(FaClock,{}),\"\\u062A\\u0627\\u0631\\u06CC\\u062E \\u0648   \\u0632\\u0645\\u0627\\u0646  \\u0627\\u0631\\u0633\\u0627\\u0644 \"]}),/*#__PURE__*/_jsx(\"p\",{className:styles.sectionStatus,children:selectedTimeSlot&&selectedDate?/*#__PURE__*/_jsxs(\"span\",{style:{color:'green'},children:[\" \",formatDate(selectedDate),\" \\u0633\\u0627\\u0639\\u062A \",selectedTimeSlot===null||selectedTimeSlot===void 0?void 0:selectedTimeSlot.time]}):' تاریخ و   زمان   انتخاب نشده'})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.DateWarpper,children:[/*#__PURE__*/_jsx(\"div\",{className:styles.dateContainer,children:dates.map((date,index)=>/*#__PURE__*/_jsx(\"div\",{className:`${styles.dateItem}`,onClick:()=>handleDateClick(date),style:{opacity:selectedDate&&selectedDate.toDateString()===date.toDateString()?'1':'0.4'},children:formatDate(date)},index))}),timeSlots.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:styles.timeSlotsContainer,children:[/*#__PURE__*/_jsx(\"h4\",{className:styles.sectionTitile,children:\"  : \\u0632\\u0645\\u0627\\u0646\"}),/*#__PURE__*/_jsxs(\"div\",{className:styles.timeSlotsList,children:[/*#__PURE__*/_jsxs(\"p\",{className:styles.sectionStatus2,children:[\" \",selectedTimeSlot&&selectedDate?totalCartPrice>=350000?/*#__PURE__*/_jsx(\"span\",{style:{color:'green'},children:\"\\u0631\\u0627\\u06CC\\u06AF\\u0627\\u0646\"}):/*#__PURE__*/_jsx(\"span\",{style:{color:'green'},children:\"50,000\"}):'',\": \\u0647\\u0632\\u06CC\\u0646\\u0647 \\u0627\\u0631\\u0633\\u0627\\u0644\"]}),timeSlots.map((slot,index)=>/*#__PURE__*/_jsxs(\"div\",{className:`${styles.timeSlot} ${slot.status==='available'?styles.available:styles.full}`,style:{border:selectedTimeSlot&&selectedTimeSlot.time===slot.time?'1px solid  #333 ':'none'},onClick:()=>{handleTimeSlotSelect(slot);},children:[slot.time,\" \\u0633\\u0627\\u0639\\u062A\"]},index))]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h1\",{className:styles.sectionTitile,style:{paddingRight:'15px'},children:[\" \",/*#__PURE__*/_jsx(FaShoppingBasket,{}),\" \\u0645\\u062D\\u0635\\u0648\\u0644\\u0627\\u062A \\u0627\\u0646\\u062A\\u062E\\u0627\\u0628 \\u0634\\u062F\\u0647\"]}),/*#__PURE__*/_jsxs(\"p\",{className:styles.sectionStatus2,style:{paddingRight:'15px'},children:[\" \",productQuantityInCart,\" : \\u062A\\u0639\\u062F\\u0627\\u062F \\u06A9\\u0644\"]}),/*#__PURE__*/_jsxs(\"p\",{className:styles.sectionStatus,style:{color:'green',paddingRight:'15px'},children:[\" \",totalCartPrice.toLocaleString(),\"  \\u0645\\u062C\\u0645\\u0648\\u0639:  \\u062A\\u0648\\u0645\\u0627\\u0646\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:styles.productWrapper,children:products.length>0?products.map(item=>/*#__PURE__*/_jsxs(\"div\",{className:styles.productContainer,children:[/*#__PURE__*/_jsx(\"span\",{className:styles.pq,children:getQuantity(state,item._id)}),/*#__PURE__*/_jsx(\"img\",{src:item.imageUrl}),/*#__PURE__*/_jsx(\"h1\",{children:item.name})]})):/*#__PURE__*/_jsx(\"div\",{className:styles.m})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"h1\",{className:styles.sectionTitile2,children:[\" \",/*#__PURE__*/_jsx(FaMoneyCheck,{}),\" \",responseMsg,\" \\u0646\\u0647\\u0627\\u06CC\\u06CC \\u06A9\\u0631\\u062F\\u0646 \\u0648 \\u067E\\u0631\\u062F\\u0627\\u062E\\u062A\"]})}),/*#__PURE__*/_jsxs(\"div\",{className:styles.factor,children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"span\",{children:[\" \\u062A\\u0648\\u0645\\u0627\\u0646 \",totalCartPrice.toLocaleString()]}),\" \",/*#__PURE__*/_jsxs(\"h1\",{children:[\" \",/*#__PURE__*/_jsxs(\"span\",{children:[\"(\",productQuantityInCart,\")\"]}),\" \\u0642\\u06CC\\u0645\\u062A \\u0645\\u062D\\u0635\\u0648\\u0644\\u0627\\u062A \"]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{children:deliveryfee}),\" \",/*#__PURE__*/_jsx(\"h2\",{children:\"\\u0647\\u0632\\u06CC\\u0646\\u0647 \\u0627\\u0631\\u0633\\u0627\\u0644  \"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"span\",{children:[\" \",deliveryfee==='رایگان'?'تومان '+totalCartPrice.toLocaleString():(deliveryfee+totalCartPrice).toLocaleString()]}),\" \",/*#__PURE__*/_jsx(\"h1\",{children:\" \\u0642\\u0627\\u0628\\u0644 \\u067E\\u0631\\u062F\\u0627\\u062E\\u062A \"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:HandelShipping,children:\"  \\u062B\\u0628\\u062A \\u0633\\u0641\\u0627\\u0631\\u0634 \\u0648 \\u067E\\u0631\\u062F\\u0627\\u062E\\u062A\"}),shippingInfoIsFull.length>0&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\u0644\\u0637\\u0641\\u0627\\u064B \\u0627\\u0637\\u0644\\u0627\\u0639\\u0627\\u062A \\u0632\\u06CC\\u0631 \\u0631\\u0627 \\u062A\\u06A9\\u0645\\u06CC\\u0644 \\u06A9\\u0646\\u06CC\\u062F\"}),/*#__PURE__*/_jsx(ErrorBox,{children:/*#__PURE__*/_jsx(\"ul\",{children:shippingInfoIsFull.map((field,index)=>/*#__PURE__*/_jsx(\"li\",{children:field},index))})})]})]})]}),/*#__PURE__*/_jsx(ToastContainer,{})]});};export default Shipping;const ErrorBox=styled.div`\n    width: 80%;\n    ul{\n        display: flex;\n        flex-direction: column;\n        justify-content: center;\n        align-items: center;\n        width: 100%;\n    }\n    li {\n        list-style: none;\n        width: 100%;\n        text-align: center;\n        font-size: 14px;\n        color: red;\n    }\n`;","map":{"version":3,"names":["React","useContext","useState","useEffect","ProductContext","useNavigate","UserContext","axios","FaMapPin","FaClock","FaMoneyCheck","FaShippingFast","FaShoppingBasket","FaMarker","FaMapSigns","FaMap","FaPhoneAlt","FaRegEnvelope","FaBuilding","FaStreetView","FaUserAlt","FaSign","FaLeaf","styles","getQuantity","ShippingContext","validate","styled","axiosInstance","notify","ToastContainer","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","formatDate","date","toLocaleDateString","weekday","month","day","Shipping","responseMsg","setResponseMsg","shippingInfo","dispatchShipping","HandelShipping","validationErrors","address","Object","keys","length","setTouched","firstName","lastName","area","neighbourhood","street","alleys","postalCode","phoneNumber","plaque","requiredFields","deliveryfee","selectedDate","toISOString","selectedTimeSlot","time","productQuantityInCart","totalCartPrice","totalPrice","products","missingFields","entries","filter","_ref","key","value","undefined","map","_ref2","fieldNames","userFriendlyNames","field","setShippingInfoIsFull","updatedShippingData","type","payload","response","post","status","navigate","error","message","errors","setErrors","shippingInfoIsFull","touched","focusHandler","e","target","name","isEditing","setIsEditing","setAddress","setDeiveryFee","setMessage","selectedBox","setSelectedBox","state","userInfo","dispatchInfo","handleChange","prevAddress","checkSession","get","data","loggedIn","redirect","logedIn","timer","setTimeout","clearTimeout","checkout","setSelectedDate","timeSlots","setTimeSlots","setSelectedTimeSlot","startDate","Date","setDate","getDate","dates","Array","from","_","i","fetchTimeSlots","transformedSlots","_ref3","console","handleDateClick","selected","setUTCHours","handleTimeSlotSelect","slot","setProductsQuantityInCart","setTotalCartPrice","setProducts","selectedItems","totalQuantity","reduce","acc","item","quantity","itemPrice","price","children","renderAddressForm","handleEditToggle","arrow","className","shippingContainer","addressSummaryContainer","onClick","addressPinIcon","size","addressSummaryText","sectionTitile","form","formField","htmlFor","id","onChange","placeholder","required","maxLength","onFocus","style","height","color","opacity","addressDetails","editButton","sectionStatus","DateWarpper","dateContainer","index","dateItem","toDateString","timeSlotsContainer","timeSlotsList","sectionStatus2","timeSlot","available","full","border","paddingRight","toLocaleString","productWrapper","productContainer","pq","_id","src","imageUrl","m","sectionTitile2","factor","ErrorBox","div"],"sources":["C:/Users/computer/Desktop/templates/shop/client/src/component/Shipping/Shipping.js"],"sourcesContent":["import React, { useContext, useState, useEffect } from 'react';\r\nimport { ProductContext } from '../../Context/ProductContextProvider';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { UserContext } from '../../Context/UserContextProvider';\r\nimport axios from 'axios';\r\nimport { FaMapPin, FaClock, FaMoneyCheck, FaShippingFast, FaShoppingBasket, FaMarker, FaMapSigns, FaMap, FaPhoneAlt, FaRegEnvelope, FaBuilding, FaStreetView, FaUserAlt, FaSign, FaLeaf } from 'react-icons/fa'; // Imported icons\r\nimport styles from './Shipping.module.css';\r\nimport { getQuantity } from '../../Helper/Helper';\r\nimport { ShippingContext } from '../../Context/ShippingCotextProvider';\r\nimport { validate } from '../../Helper/ShippingErrors';\r\nimport styled from 'styled-components'\r\nimport axiosInstance from '../../Helper/apiInterceptors';\r\nimport { notify } from '../../Helper/toast';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport { ToastContainer } from 'react-toastify';\r\n\r\n\r\n// Helper function to format dates for display\r\nexport const formatDate = (date) => {\r\n    return date.toLocaleDateString('fa-IR', { weekday: 'short', month: 'short', day: 'numeric' });\r\n};\r\n\r\nconst Shipping = () => {\r\n\r\n    const [responseMsg, setResponseMsg] = useState('');\r\n\r\n\r\n    const { shippingInfo, dispatchShipping } = useContext(ShippingContext);\r\n    const HandelShipping = async () => {\r\n\r\n        const validationErrors = validate(address, 'login');\r\n        if (Object.keys(validationErrors).length !== 0) {\r\n            validate(address,);\r\n            setTouched({\r\n                firstName: true,\r\n                lastName: true,\r\n                area: true,\r\n                neighbourhood: true,\r\n                street: true,\r\n                alleys: true,\r\n                postalCode: true,\r\n                phoneNumber: true,\r\n                plaque: true,\r\n            })\r\n            // return\r\n        }\r\n\r\n        const requiredFields = {\r\n            firstName: address.firstName,\r\n            lastName: address.lastName,\r\n            area: address.area,\r\n            neighbourhood: address.neighbourhood,\r\n            street: address.street,\r\n            alleys: address.alleys,\r\n            postalCode: address.postalCode,\r\n            phoneNumber: address.phoneNumber,\r\n            plaque: address.plaque,\r\n            deliveryfee,\r\n            selectedDate: selectedDate ? selectedDate.toISOString() : null,\r\n            selectedTimeSlot: selectedTimeSlot?.time,\r\n            productQuantityInCart,\r\n            totalCartPrice,\r\n            totalPrice: deliveryfee + totalCartPrice,\r\n            products,\r\n        };\r\n\r\n        // Check for missing fields\r\n        const missingFields = Object.entries(requiredFields)\r\n            .filter(([key, value]) => value === null || value === undefined || value === '')\r\n            .map(([key]) => key);\r\n\r\n        // Map field keys to user-friendly names\r\n        const fieldNames = {\r\n            firstName: 'نام',\r\n            lastName: 'نام خانوادگی',\r\n            area: 'منطقه',\r\n            neighbourhood: 'محله',\r\n            street: 'خیابان',\r\n            alleys: 'کوچه',\r\n            postalCode: 'کد پستی',\r\n            phoneNumber: 'شماره تلفن',\r\n            plaque: 'پلاک',\r\n            deliveryfee: 'هزینه ارسال',\r\n            selectedDate: 'تاریخ  ',\r\n            selectedTimeSlot: 'بازه زمانی  ',\r\n            productQuantityInCart: 'تعداد محصولات در سبد خرید',\r\n            totalCartPrice: 'مجموع قیمت سبد خرید',\r\n            totalPrice: 'قیمت کل',\r\n            products: 'محصولات',\r\n        };\r\n        // Get user-friendly names for missing fields\r\n        const userFriendlyNames = missingFields.map((field) => fieldNames[field]);\r\n\r\n\r\n        if (missingFields.length > 0) {\r\n\r\n            // alert(`The following fields are missing or invalid: ${missingFields.join(', ')}`);\r\n\r\n            notify(`u have currenlly ${missingFields.length} missing fields`, 'error');\r\n            setShippingInfoIsFull([...userFriendlyNames]);\r\n            return;\r\n        }\r\n\r\n\r\n\r\n        const updatedShippingData = {\r\n            ...requiredFields,\r\n        };\r\n\r\n        // Dispatch the data to the reducer\r\n        dispatchShipping({\r\n            type: 'HANDEL_DETAILS',\r\n            payload: updatedShippingData,\r\n        });\r\n\r\n\r\n\r\n        try {\r\n            // Use the updatedShippingData directly in the API call\r\n            const response = await axiosInstance.post(\r\n                '/add-order', { updatedShippingData }\r\n            );\r\n            if (response.status === 201) {\r\n                // alert('Order was placed successfully');\r\n                notify(`order was placed successfully`, 'success');\r\n                navigate('/dashboard')\r\n            }\r\n        } catch (error) {\r\n            notify(error.message, 'error');\r\n            setResponseMsg(error.message);\r\n        }\r\n    };\r\n    const [errors, setErrors] = useState({});\r\n    const [shippingInfoIsFull, setShippingInfoIsFull] = useState([])\r\n    const [touched, setTouched] = useState({});\r\n    const focusHandler = (e) => {\r\n        setTouched({ ...touched, [e.target.name]: true, })\r\n    }\r\n\r\n\r\n\r\n    const navigate = useNavigate();\r\n    const [isEditing, setIsEditing] = useState(false);  // Track edit mode\r\n    const [address, setAddress] = useState({\r\n        firstName: '',\r\n        lastName: '',\r\n        area: '',\r\n        neighbourhood: '',\r\n        street: '',\r\n        alleys: '',\r\n        postalCode: '',\r\n        phoneNumber: '',\r\n        plaque: ''\r\n    });\r\n    const [deliveryfee, setDeiveryFee] = useState()\r\n\r\n    useEffect(() => {\r\n        setErrors(validate(address))\r\n    }, [address, touched])\r\n\r\n\r\n    const [message, setMessage] = useState('');\r\n    const [selectedBox, setSelectedBox] = useState(false);\r\n\r\n    //context\r\n    const { state } = useContext(ProductContext);\r\n    const { userInfo, dispatchInfo } = useContext(UserContext);\r\n\r\n    const handleChange = (e) => {\r\n        const { name, value } = e.target;\r\n        setAddress(prevAddress => ({ ...prevAddress, [name]: value }));\r\n    };\r\n\r\n    const checkSession = async () => {\r\n        try {\r\n            const response = await axiosInstance.get('/check-session');\r\n            if (response.data.loggedIn && response.data.redirect) {\r\n                dispatchInfo({ type: 'LOGIN' });\r\n            } else {\r\n                navigate('/dashboard')\r\n            }\r\n        } catch (error) {\r\n            notify(error.message, 'error');\r\n            setResponseMsg(error.message);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        checkSession();\r\n        if (!userInfo.logedIn) {\r\n            setMessage('شما وارد نشده‌اید. در حال هدایت به داشبورد...');\r\n            const timer = setTimeout(() => {\r\n                navigate('/dashboard');\r\n            }, 3000);\r\n            return () => clearTimeout(timer);\r\n        } else if (!state.checkout) {\r\n            setMessage('سبد خرید شما خالی است. در حال هدایت به فروشگاه...');\r\n            const timer = setTimeout(() => {\r\n                navigate('/store');\r\n            }, 3000);\r\n            return () => clearTimeout(timer);\r\n        }\r\n    }, [userInfo.logedIn, state.checkout, navigate]);\r\n\r\n\r\n\r\n    //date handeling///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n\r\n    const [selectedDate, setSelectedDate] = useState(null);\r\n    const [timeSlots, setTimeSlots] = useState([]);  // Time slots state\r\n    const [selectedTimeSlot, setSelectedTimeSlot] = useState(null);  // Store the selected time slot\r\n\r\n    // Calculate the start date (3 days from today)\r\n    const startDate = new Date();\r\n    startDate.setDate(startDate.getDate() + 3);\r\n\r\n    // Generate dates for the next 14 days\r\n    const dates = Array.from({ length: 14 }, (_, i) => {\r\n        const date = new Date(startDate);\r\n        date.setDate(startDate.getDate() + i);\r\n        return date;\r\n    });\r\n\r\n    //  MongoDB’s Date type stores the entire date, including time, down to milliseconds (e.g., 2024-11-28T00:00:00.000Z). However, as long as you set the time portion to midnight (00:00:00) in UTC, this will not throw an error, and it will work correctly with MongoDB queries.\r\n\r\n\r\n    // Fetch available time slots for selected date\r\n    const fetchTimeSlots = async (date) => {\r\n        try {\r\n            // Make a request to the server with the date query\r\n            const response = await axiosInstance.get(`/check-date-capacity?date=${date}`);\r\n\r\n            if (response.status === 200) {\r\n                const transformedSlots = Object.entries(response.data).map(([time, status]) => ({ //object.entries makes every object into array then the map function maps through the inner arrays turning them into object with time and status properties will will retun an array with 4  new object with time and status as properties.\r\n                    time,\r\n                    status\r\n                }));\r\n                setTimeSlots(transformedSlots);\r\n            } else {\r\n                console.error(\"Unexpected response status:\", response.status);\r\n            }\r\n        } catch (error) {\r\n            notify(error.message, 'error');\r\n            setResponseMsg(error.message);\r\n        }\r\n    };\r\n    // Handle date click and store it as a Date object\r\n\r\n    const handleDateClick = (date) => {\r\n\r\n        setSelectedTimeSlot(null)\r\n        const selected = new Date(date);\r\n        selected.setUTCHours(0, 0, 0, 0); // Set time to midnight UTC\r\n        setSelectedDate(selected);\r\n        fetchTimeSlots(selected.toISOString());\r\n\r\n    };\r\n\r\n\r\n    // Handle time slot selection\r\n    const handleTimeSlotSelect = (slot) => {\r\n        if (slot.status === 'available') {\r\n            setSelectedTimeSlot(slot);\r\n        }\r\n        if (totalCartPrice >= 375000) {\r\n            setDeiveryFee('رایگان')\r\n        }\r\n\r\n    };\r\n    const [productQuantityInCart, setProductsQuantityInCart] = useState(0);\r\n    const [totalCartPrice, setTotalCartPrice] = useState(0);\r\n    const [products, setProducts] = useState([]);\r\n\r\n    useEffect(() => {\r\n        setProducts(state.selectedItems);\r\n\r\n        const totalQuantity = state.selectedItems.reduce((acc, item) => acc + item.quantity, 0);\r\n        setProductsQuantityInCart(totalQuantity);\r\n\r\n        // Calculate total price\r\n        const totalPrice = state.selectedItems.reduce((acc, item) => {\r\n            const itemPrice = item.price * item.quantity;\r\n            return acc + itemPrice;\r\n        }, 0);\r\n        setTotalCartPrice(totalPrice);\r\n\r\n        setDeiveryFee(totalPrice >= 350000 ? 'رایگان' : 50000)\r\n\r\n    }, [state.selectedItems]);\r\n\r\n\r\n    if (message) {\r\n        return (\r\n            <div>{message}</div>\r\n        );\r\n    }\r\n\r\n    // Show the dotted box with the pin icon if no address is available\r\n    const renderAddressForm = !address.area && !address.neighbourhood && !address.street && !address.alleys;\r\n\r\n    const handleEditToggle = () => {\r\n        const validationErrors = validate(address);\r\n\r\n        if (Object.keys(validationErrors).length === 0) {\r\n            setIsEditing(!isEditing);\r\n            setErrors({});\r\n        } else {\r\n            setErrors(validationErrors);\r\n            setIsEditing(true);\r\n        }\r\n    };\r\n    const arrow = '<'\r\n\r\n    return (\r\n        <div className={styles.shippingContainer}>\r\n            {renderAddressForm && !isEditing ? (\r\n                <div className={styles.addressSummaryContainer} onClick={handleEditToggle}>\r\n                    <div className={styles.addressPinIcon}>\r\n                        <FaMapPin size={50} />\r\n                    </div>\r\n                    <p className={styles.addressSummaryText}>پر کردن اطلاعات تحویل</p>\r\n                </div>\r\n            ) : (\r\n\r\n                <>\r\n                    {/* Address and information */}\r\n                    <div>\r\n                        <h2 className={styles.sectionTitile}> <FaShippingFast /> اطلاعات حمل و نقل</h2>\r\n\r\n\r\n                        {isEditing ? (\r\n                            <form className={styles.form}>\r\n                                <div className={styles.formField}>\r\n                                    <label htmlFor=\"firstName\">نام</label>\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        id=\"firstName\"\r\n                                        name=\"firstName\"\r\n                                        value={address.firstName}\r\n                                        onChange={handleChange}\r\n                                        placeholder=\"نام\"\r\n                                        required\r\n                                        maxLength=\"30\"\r\n                                        onFocus={focusHandler}\r\n                                    />\r\n                                    <span style={{ height: '1rem', color: 'red', opacity: touched.firstName ? '1' : '0' }}>{errors.firstName && touched.firstName && `${errors.firstName}`}</span>\r\n                                </div>\r\n                                <div className={styles.formField}>\r\n                                    <label htmlFor=\"lastName\">نام خانوادگی</label>\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        id=\"lastName\"\r\n                                        name=\"lastName\"\r\n                                        value={address.lastName}\r\n                                        onChange={handleChange}\r\n                                        placeholder=\"نام خانوادگی\"\r\n                                        required\r\n                                        maxLength=\"30\"\r\n\r\n                                        onFocus={focusHandler}\r\n                                    />\r\n                                    <span style={{ height: '1rem', color: 'red', opacity: touched.lastName ? '1' : '0' }}>{errors.lastName && touched.lastName && `${errors.lastName}`}</span>\r\n                                </div>\r\n                                <div className={styles.formField}>\r\n                                    <label htmlFor=\"area\">منطقه</label>\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        id=\"area\"\r\n                                        name=\"area\"\r\n                                        value={address.area}\r\n                                        onChange={handleChange}\r\n                                        placeholder=\"منطقه\"\r\n                                        required\r\n                                        maxLength=\"30\"\r\n\r\n                                        onFocus={focusHandler}\r\n                                    />\r\n                                    <span style={{ height: '1rem', color: 'red', opacity: touched.area ? '1' : '0' }}>{errors.area && touched.area && `${errors.area}`}</span>\r\n                                </div>\r\n                                <div className={styles.formField}>\r\n                                    <label htmlFor=\"neighbourhood\">محله</label>\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        id=\"neighbourhood\"\r\n                                        name=\"neighbourhood\"\r\n                                        value={address.neighbourhood}\r\n                                        onChange={handleChange}\r\n                                        placeholder=\"نام محله\"\r\n                                        required\r\n                                        maxLength=\"30\"\r\n                                        onFocus={focusHandler}\r\n                                    />\r\n                                    <span style={{ height: '1rem', color: 'red', opacity: touched.neighbourhood ? '1' : '0' }}>{errors.neighbourhood && touched.neighbourhood && `${errors.neighbourhood}`}</span>\r\n                                </div>\r\n                                <div className={styles.formField}>\r\n                                    <label htmlFor=\"street\">خیابان</label>\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        id=\"street\"\r\n                                        name=\"street\"\r\n                                        value={address.street}\r\n                                        onChange={handleChange}\r\n                                        placeholder=\"نام خیابان\"\r\n                                        maxLength=\"30\"\r\n                                        required\r\n                                        onFocus={focusHandler}\r\n                                    />\r\n                                    <span style={{ height: '1rem', color: 'red', opacity: touched.street ? '1' : '0' }}>{errors.street && touched.street && `${errors.street}`}</span>\r\n                                </div>\r\n                                <div className={styles.formField}>\r\n                                    <label htmlFor=\"alleys\">کوچه</label>\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        id=\"alleys\"\r\n                                        name=\"alleys\"\r\n                                        value={address.alleys}\r\n                                        onChange={handleChange}\r\n                                        placeholder=\"کوچه\"\r\n                                        maxLength=\"30\"\r\n\r\n                                        onFocus={focusHandler}\r\n                                    />\r\n                                    <span style={{ height: '1rem', color: 'red', opacity: touched.alleys ? '1' : '0' }}>{errors.alleys && touched.alleys && `${errors.alleys}`}</span>\r\n                                </div>\r\n                                <div className={styles.formField}>\r\n                                    <label htmlFor=\"postalCode\">کد پستی</label>\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        id=\"postalCode\"\r\n                                        name=\"postalCode\"\r\n                                        value={address.postalCode}\r\n                                        onChange={handleChange}\r\n                                        placeholder=\"کد پستی\"\r\n                                        maxLength=\"30\"\r\n\r\n                                        onFocus={focusHandler}\r\n                                    />\r\n                                    <span style={{ height: '1rem', color: 'red', opacity: touched.postalCode ? '1' : '0' }}>{errors.postalCode && touched.postalCode && `${errors.postalCode}`}</span>\r\n                                </div>\r\n                                <div className={styles.formField}>\r\n                                    <label htmlFor=\"phoneNumber\">شماره تلفن</label>\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        id=\"phoneNumber\"\r\n                                        name=\"phoneNumber\"\r\n                                        value={address.phoneNumber}\r\n                                        onChange={handleChange}\r\n                                        placeholder=\"شماره تلفن\"\r\n                                        required\r\n                                        maxLength=\"30\"\r\n                                        onFocus={focusHandler}\r\n\r\n                                    />\r\n                                    <span style={{ height: '1rem', color: 'red', opacity: touched.phoneNumber ? '1' : '0' }}>{errors.phoneNumber && touched.phoneNumber && `${errors.phoneNumber}`}</span>\r\n                                </div>\r\n                                <div className={styles.formField}>\r\n                                    <label htmlFor=\"plaque\">پلاک</label>\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        id=\"plaque\"\r\n                                        name=\"plaque\"\r\n                                        value={address.plaque}\r\n                                        onChange={handleChange}\r\n                                        placeholder=\"پلاک\"\r\n                                        required\r\n                                        maxLength=\"30\"\r\n                                        onFocus={focusHandler}\r\n                                    />\r\n                                    <span style={{ height: '1rem', color: 'red', opacity: touched.plaque ? '1' : '0' }}>{errors.plaque && touched.plaque && `${errors.plaque}`}</span>\r\n                                </div>\r\n                            </form>\r\n                        ) : (\r\n                            <div className={styles.addressDetails}>\r\n                                <div><FaUserAlt /> <span>: نام و نام خانوادگی</span> {address.firstName} {address.lastName}</div>\r\n                                <div><FaMapSigns /> <span> {arrow} منطقه</span> {address.area} <span> {arrow} محله</span> {address.neighbourhood} <span> {arrow} خیابان</span> {address.street} <span> {arrow} کوچه</span> {address.alleys} <span> {arrow} پلاک</span> {address.plaque}</div>\r\n                                <div><FaPhoneAlt /> <span> : شماره تلفن</span> {address.phoneNumber}</div>\r\n                                <div><FaRegEnvelope /> <span> : کد پستی</span> {address.postalCode}</div>\r\n                                {/* <div><FaUserAlt /> <span>: نام و نام خانوادگی</span> {address.firstName} {address.lastName}</div>\r\n                            <div><FaMapSigns />  {address.area}   {address.neighbourhood}  {address.street} {address.alleys} {address.plaque}</div>\r\n                            <div><FaPhoneAlt /> <span> : شماره تلفن</span> {address.phoneNumber}</div>\r\n                            <div><FaRegEnvelope /> <span> : کد پستی</span> {address.postalCode}</div> */}\r\n                            </div>\r\n                        )}\r\n                        <button className={styles.editButton} onClick={handleEditToggle}>\r\n                            {isEditing ? 'خاتمه و مشاهده' : 'ویرایش'}\r\n                        </button>\r\n                    </div>\r\n\r\n\r\n                    {/* Date selection */}\r\n                    <div>\r\n                        <h4 className={styles.sectionTitile}> <FaClock />تاریخ و   زمان  ارسال </h4>\r\n                        <p className={styles.sectionStatus}>{selectedTimeSlot && selectedDate ? <span style={{ color: 'green' }}> {formatDate(selectedDate)} ساعت {selectedTimeSlot?.time}</span> : ' تاریخ و   زمان   انتخاب نشده'}</p>\r\n                    </div>\r\n                    <div className={styles.DateWarpper}>\r\n                        <div className={styles.dateContainer}>\r\n                            {dates.map((date, index) => (\r\n\r\n                                <div\r\n                                    key={index}\r\n                                    className={`${styles.dateItem}`}\r\n                                    onClick={() => handleDateClick(date)}\r\n                                    style={{\r\n                                        opacity: selectedDate && selectedDate.toDateString() === date.toDateString() ? '1' : '0.4'\r\n                                    }}\r\n                                >\r\n                                    {formatDate(date)}\r\n                                </div>\r\n                            ))}\r\n\r\n                        </div>\r\n                        {/* Time slots selection */}\r\n                        {timeSlots.length > 0 && (\r\n                            <div className={styles.timeSlotsContainer}>\r\n                                <h4 className={styles.sectionTitile}>  : زمان</h4>\r\n                                <div className={styles.timeSlotsList}>\r\n\r\n                                    <p className={styles.sectionStatus2}> {(selectedTimeSlot && selectedDate) ? (totalCartPrice >= 350000 ? <span style={{ color: 'green' }}>رایگان</span> : <span style={{ color: 'green' }}>50,000</span>) : ''}: هزینه ارسال</p>\r\n\r\n                                    {timeSlots.map((slot, index) => (\r\n                                        <div\r\n                                            key={index}\r\n                                            className={`${styles.timeSlot} ${slot.status === 'available' ? styles.available : styles.full}`}\r\n                                            style={{\r\n                                                border: selectedTimeSlot && selectedTimeSlot.time === slot.time ? '1px solid  #333 ' : 'none',\r\n                                            }}\r\n                                            onClick={() => {\r\n                                                handleTimeSlotSelect(slot)\r\n                                            }\r\n                                            }\r\n                                        >\r\n                                            {slot.time} ساعت\r\n                                            {/* - {slot.status} */}\r\n                                        </div>\r\n                                    ))}\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n\r\n\r\n\r\n                    {/* Diplaying products */}\r\n\r\n\r\n                    <div>\r\n                        <h1 className={styles.sectionTitile} style={{ paddingRight: '15px' }} > <FaShoppingBasket /> محصولات انتخاب شده</h1>\r\n                        <p className={styles.sectionStatus2} style={{ paddingRight: '15px' }} > {productQuantityInCart} : تعداد کل</p>\r\n                        <p className={styles.sectionStatus} style={{ color: 'green', paddingRight: '15px' }}> {totalCartPrice.toLocaleString()}  مجموع:  تومان</p>\r\n                    </div>\r\n                    <div className={styles.productWrapper}>\r\n\r\n                        {products.length > 0 ? (\r\n                            products.map((item) => (\r\n                                <div className={styles.productContainer}>\r\n                                    <span className={styles.pq}>{getQuantity(state, item._id)}</span>\r\n                                    <img src={item.imageUrl} />\r\n                                    <h1>{item.name}</h1>\r\n                                </div>\r\n                            ))\r\n                        ) : (\r\n                            <div className={styles.m}>\r\n\r\n\r\n                            </div>\r\n                        )}\r\n\r\n                    </div>\r\n\r\n                    {/* check and pay */}\r\n                    <div>\r\n                        <h1 className={styles.sectionTitile2}> <FaMoneyCheck /> {responseMsg} نهایی کردن و پرداخت</h1>\r\n                    </div>\r\n\r\n                    <div className={styles.factor}>\r\n                        <div>\r\n                            <span> تومان {totalCartPrice.toLocaleString()}</span> <h1> <span>({productQuantityInCart})</span> قیمت محصولات </h1>\r\n                        </div>\r\n                        <div>\r\n                            <span>{deliveryfee}</span> <h2>هزینه ارسال  </h2>\r\n                        </div>\r\n                        <div>\r\n                            <span> {deliveryfee === 'رایگان' ? 'تومان ' + totalCartPrice.toLocaleString() : (deliveryfee + totalCartPrice).toLocaleString()}</span> <h1> قابل پرداخت </h1>\r\n                        </div>\r\n                        <button onClick={HandelShipping}>  ثبت سفارش و پرداخت</button>\r\n\r\n                        {shippingInfoIsFull.length > 0 && (\r\n                            <>\r\n                                <p>لطفاً اطلاعات زیر را تکمیل کنید</p>\r\n                                <ErrorBox>\r\n                                    <ul>\r\n                                        {shippingInfoIsFull.map((field, index) => (\r\n                                            <li key={index}>{field}</li>\r\n                                        ))}\r\n                                    </ul>\r\n                                </ErrorBox>\r\n                            </>\r\n                        )}\r\n                    </div>\r\n\r\n                </>\r\n            )\r\n            }\r\n            <ToastContainer />\r\n        </div >\r\n    );\r\n};\r\n\r\nexport default Shipping;\r\n\r\n\r\nconst ErrorBox = styled.div`\r\n    width: 80%;\r\n    ul{\r\n        display: flex;\r\n        flex-direction: column;\r\n        justify-content: center;\r\n        align-items: center;\r\n        width: 100%;\r\n    }\r\n    li {\r\n        list-style: none;\r\n        width: 100%;\r\n        text-align: center;\r\n        font-size: 14px;\r\n        color: red;\r\n    }\r\n`;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}